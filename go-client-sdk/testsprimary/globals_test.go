// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package tests

import (
	"context"
	"net/http"
	"testing"

	sdk "openapi/v3"

	"github.com/AlekSi/pointer"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
)

func TestGlobalsQueryParameterGet_UsesGlobal(t *testing.T) {
	recordTest("globals-query-parameter-get-uses-global")

	s := sdk.New(sdk.WithGlobalQueryParam("test"))

	res, err := s.Globals.GlobalsQueryParameterGet(context.Background(), nil)
	require.NoError(t, err)
	require.NotNil(t, res)
	assert.Equal(t, http.StatusOK, res.StatusCode)
	assert.Equal(t, "test", res.Res.Args.GlobalQueryParam)
}

func TestGlobalsQueryParameterGet_UsesLocal(t *testing.T) {
	recordTest("globals-query-parameter-get-uses-local")

	s := sdk.New(sdk.WithGlobalQueryParam("test"))

	res, err := s.Globals.GlobalsQueryParameterGet(context.Background(), pointer.ToString("local"))
	require.NoError(t, err)
	require.NotNil(t, res)
	assert.Equal(t, http.StatusOK, res.StatusCode)
	assert.Equal(t, "local", res.Res.Args.GlobalQueryParam)
}

func TestGlobalPathParameterGet_UsesGlobal(t *testing.T) {
	recordTest("globals-path-parameter-get-uses-global")

	s := sdk.New(sdk.WithGlobalPathParam(1))

	res, err := s.Globals.GlobalPathParameterGet(context.Background(), nil)
	require.NoError(t, err)
	require.NotNil(t, res)
	assert.Equal(t, http.StatusOK, res.StatusCode)
	assert.Equal(t, "http://localhost:35123/anything/globals/pathParameter/1", res.Res.URL)
}

func TestGlobalPathParameterGet_UsesLocal(t *testing.T) {
	recordTest("globals-path-parameter-get-uses-local")

	s := sdk.New(sdk.WithGlobalPathParam(1))

	res, err := s.Globals.GlobalPathParameterGet(context.Background(), pointer.ToInt64(2))
	require.NoError(t, err)
	require.NotNil(t, res)
	assert.Equal(t, http.StatusOK, res.StatusCode)
	assert.Equal(t, "http://localhost:35123/anything/globals/pathParameter/2", res.Res.URL)
}
