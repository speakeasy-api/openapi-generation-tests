// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package tests

import (
	"context"
	"net/http"
	"testing"

	sdk "openapi"

	"openapi"
	"openapi/pkg/models/shared"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
)

func TestHooks_TestHooksAfterResponse(t *testing.T) {
	recordTest("test-hooks-after-response")

	s := openapi.New(
		openapi.WithSecurity(shared.Security{
			APIKeyAuth: openapi.String("Token YOUR_API_KEY"),
		}),
	)

	ctx := context.Background()
	res, err := s.Hooks.TestHooksAfterResponse(ctx)
	assert.ErrorContains(t, err, "validation failed")
	assert.Nil(t, res)
}

func TestHooks_TestHooksError(t *testing.T) {
	recordTest("test-hooks-error")

	s := openapi.New(
		openapi.WithSecurity(shared.Security{
			APIKeyAuth: openapi.String("Token YOUR_API_KEY"),
		}),
	)

	ctx := context.Background()
	res, err := s.Hooks.TestHooksError(ctx)
	assert.ErrorContains(t, err, "special test error case")
	assert.Nil(t, res)
}

func TestHooks_AuthorizationHeaderModification(t *testing.T) {
	recordTest("hooks-authorization-header-modification")

	s := sdk.New(sdk.WithSecurity(shared.Security{
		APIKeyAuth: openapi.String("Bearer testToken"),
	}))

	res, err := s.Hooks.AuthorizationHeaderModification(context.Background())
	require.NoError(t, err)
	require.NotNil(t, res)
	assert.Equal(t, http.StatusOK, res.HTTPMeta.Response.StatusCode)
	assert.True(t, res.Token.Authenticated)
	assert.Equal(t, "testToken modified", res.Token.Token)
}
