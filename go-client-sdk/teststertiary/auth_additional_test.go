// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package tests

import (
	"context"
	"testing"

	sdk "openapi/v2"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"openapi/v2/pkg/models/sdkerrors"
)

func TestGlobalSecurityFlattening(t *testing.T) {
	recordTest("auth-api-key-auth-global")

	s := sdk.New()

	res, err := s.Auth.APIKeyAuthGlobal(context.Background())
	require.Error(t, err)
	var sdkErr *sdkerrors.SDKError
	if assert.ErrorAs(t, err, &sdkErr) {
		assert.Equal(t, err.Error(), "API error occurred: Status 401")
	}
	assert.Nil(t, res)
}
