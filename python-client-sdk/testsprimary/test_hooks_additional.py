"""Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT."""

import pytest
import sdk.models.shared as shared
from sdk import SDK
from sdk.models.operations import *

from .common_helpers import *
from .test_helpers import *


def test_hooks_after_response():
    record_test("test-hooks-after-response")

    s = SDK(
        security=shared.Security(
            api_key_auth="Token YOUR_API_KEY",
        )
    )

    assert s is not None

    with pytest.raises(Exception, match="validation failed") as exc:
        res = s.hooks.test_hooks_after_response()


def test_hooks_error():
    record_test("test-hooks-error")

    s = SDK(
        security=shared.Security(
            api_key_auth="Token YOUR_API_KEY",
        )
    )

    assert s is not None

    with pytest.raises(Exception, match="special test error case") as exc:
        res = s.hooks.test_hooks_error()


def test_hooks_authorization_header_modification():
    record_test("hooks-authorization-header-modification")

    s = SDK(
        security=shared.Security(
            api_key_auth="Bearer testToken",
        )
    )

    assert s is not None

    res = s.hooks.authorization_header_modification()

    assert res is not None
    assert res.http_meta.response.status_code == 200
    assert res.token is not None
    assert res.token.authenticated is True
    assert res.token.token == "testToken modified"
