"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

import os

from openapi import SDK
from openapi.models.operations import *
from openapi.models.shared import *

from .common_helpers import *
from .test_helpers import *


def test_request_body_put_multipart_file():
    record_test("request-bodies-put-multipart-file")

    s = SDK()
    assert s is not None

    f = open(os.path.dirname(__file__) + "/testUpload.json", mode="rb")
    data = f.read()

    res = s.request_bodies.request_body_put_multipart_file(
        request=RequestBodyPutMultipartFileRequestBody(
            file=File(content=data, file_name="testUpload.json")
        )
    )

    assert res is not None
    assert res.http_meta is not None
    assert res.http_meta.response is not None
    assert res.http_meta.response.status_code == 200
    assert res.res is not None
    assert res.res.files == {"file": data.decode("utf-8")}


def test_request_body_put_multipart_file_ref():
    record_test("request-bodies-put-multipart-file-ref")

    s = SDK()
    assert s is not None

    f = open(os.path.dirname(__file__) + "/testUpload.json", mode="rb")
    data = f.read()

    res = s.request_bodies.request_body_put_multipart_file_ref(
        request=RequestBodyPutMultipartFileRefRequestBody(
            file=BinaryString(content=data, file_name="testUpload.json")
        )
    )

    assert res is not None
    assert res.http_meta is not None
    assert res.http_meta.response is not None
    assert res.http_meta.response.status_code == 200
    assert res.res is not None
    assert res.res.files == {"file": data.decode("utf-8")}


def test_request_body_put_bytes():
    record_test("request-bodies-put-bytes")

    s = SDK()
    assert s is not None

    f = open(os.path.dirname(__file__) + "/testUpload.json", mode="rb")
    data = f.read()
    res = s.request_bodies.request_body_put_bytes(request=data)

    assert res is not None
    assert res.http_meta is not None
    assert res.http_meta.response is not None
    assert res.http_meta.response.status_code == 200
    assert res.res is not None
    assert res.res.data == data.decode("utf-8")


def test_request_no_body_no_content_type():
    record_test("request-bodies-no-body-no-content-type")

    s = SDK()

    assert s is not None

    res = s.methods.method_get(server_url="http://localhost:35456")

    assert res.http_meta is not None

    assert res.http_meta.request is not None
    assert res.http_meta.request.content == b""
    assert res.http_meta.request.headers.get("content-type") is None

    assert res.http_meta.response is not None
    assert res.http_meta.response.status_code == 200
    assert res.object is not None
    assert res.object == MethodGetResponseBody(
        status="OK",
    )


def test_request_bodies_wildcard_no_content_type():
    # Assuming similar record_test function exists
    record_test("request-bodies-wildcard-no-content-type")

    sdk = SDK()

    res = sdk.request_bodies.request_body_post_wildcard()

    assert res.http_meta is not None
    assert res.http_meta.response is not None
    assert res.http_meta.response.status_code == 200

    assert res.http_meta.request is not None
    assert res.http_meta.request.headers.get("Content-Type") is None
