"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from openapi import SDK, SERVERS
from .common_helpers import record_test


def test_select_global_server_valid():
    record_test("servers-select-global-server-valid")

    url = SERVERS[0]
    assert url == "http://localhost:35123"

    s = SDK(server_url=url)
    assert s is not None

    res = s.servers.select_global_server()

    assert res is not None
    assert res.status_code == 200


def test_select_global_server_broken():
    record_test("servers-select-global-server-broken")

    url = SERVERS[1]
    assert url == "http://broken"

    s = SDK(server_url=url)
    assert s is not None

    error = None

    try:
        s.servers.select_global_server()
    except Exception as err:
        error = err

    assert error is not None


def test_select_global_server_by_id_default():
    record_test("servers-select-global-server-by-id-default")

    s = SDK()
    assert s is not None

    res = s.servers.select_global_server()

    assert res is not None
    assert res.status_code == 200


def test_select_global_server_by_id_valid():
    record_test("servers-select-global-server-by-id-valid")

    s = SDK(server_idx=0)
    assert s is not None

    res = s.servers.select_global_server()

    assert res is not None
    assert res.status_code == 200


def test_select_global_server_by_id_invalid():
    record_test("servers-select-global-server-by-id-invalid")

    error = None
    try:
        s = SDK(server_idx=2)
    except Exception as err:
        error = err

    assert error is not None
    assert str(error) == "list index out of range"


def test_select_global_server_by_id_broken():
    record_test("servers-select-global-server-by-id-broken")

    s = SDK(server_idx=1)
    assert s is not None

    error = None

    try:
        s.servers.select_global_server()
    except Exception as err:
        error = err

    assert error is not None
