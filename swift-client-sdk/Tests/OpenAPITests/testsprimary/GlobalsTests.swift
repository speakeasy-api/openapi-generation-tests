// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

import XCTest
@testable import OpenAPI

class GlobalsTests: XCTestCase {
    func testGlobalsQueryParameterGetUsesGlobal() async throws {
        try recordTest(named: "globals-query-parameter-get-uses-global")

        let client = Client(globalParameters: GlobalParameters(globalQueryParam: "test"), security: .apiKeyAuth("api_key_here"))
        let response = try await client.globals.globalsQueryParameterGet(
            request: .init(globalQueryParam: nil)
        )
        XCTAssertEqual(response.statusCode, 200, "Request should succeed")
        XCTAssertEqual(try response.data.res().args.globalQueryParam, "test")
    }

    func testGlobalsQueryParameterGetUsesLocal() async throws {
        try recordTest(named: "globals-query-parameter-get-uses-local")

        let client = Client(globalParameters: GlobalParameters(globalQueryParam: "test"), security: .apiKeyAuth("api_key_here"))
        let response = try await client.globals.globalsQueryParameterGet(
            request: .init(globalQueryParam: "local")
        )
        XCTAssertEqual(response.statusCode, 200, "Request should succeed")
        XCTAssertEqual(try response.data.res().args.globalQueryParam, "local")
    }

    func testGlobalPathParameterGetUsesGlobal() async throws {
        try recordTest(named: "globals-path-parameter-get-uses-global")

        let client = Client(globalParameters: GlobalParameters(globalPathParam: 1), security: .apiKeyAuth("api_key_here"))
        let response = try await client.globals.globalPathParameterGet(
            request: .init(globalPathParam: nil)
        )
        XCTAssertEqual(response.statusCode, 200, "Request should succeed")
        XCTAssertEqual(try response.data.res().url, "http://localhost:35123/anything/globals/pathParameter/1")
    }

    func testGlobalPathParameterGetUsesLocal() async throws {
        try recordTest(named: "globals-path-parameter-get-uses-local")

        let client = Client(globalParameters: GlobalParameters(globalPathParam: 1), security: .apiKeyAuth("api_key_here"))
        let response = try await client.globals.globalPathParameterGet(
            request: .init(globalPathParam: 2)
        )
        XCTAssertEqual(response.statusCode, 200, "Request should succeed")
        XCTAssertEqual(try response.data.res().url, "http://localhost:35123/anything/globals/pathParameter/2")
    }
}