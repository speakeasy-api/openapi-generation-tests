/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { expect, test } from "@jest/globals";
import { createSimpleObject, recordTest } from "./helpers";

import { AxiosError } from "axios";
import { SDK } from "../src/sdk";
import { StatusGetResponse } from "../src/sdk/models/operations";

test("Test Errors 400 Response", async () => {
  recordTest("errors-400-response");

  const sdk = new SDK({});

  const res: StatusGetResponse = await sdk.errors.statusGet(400);

  expect(res).toBeInstanceOf(StatusGetResponse);
  expect(res.statusCode).toBe(400);
});

test("Test Errors Connection Error", async () => {
  recordTest("errors-connection-error");

  const sdk = new SDK({});

  let caught = false;

  try {
    await sdk.errors.connectionErrorGet();
  } catch (err) {
    expect(err).toBeInstanceOf(AxiosError);
    caught = true;
  }

  expect(caught).toBe(true);
});

test("Test Errors 5XX Retries", async () => {
  recordTest("errors-5XX-retries");

  const sdk = new SDK({});

  let caught = false;

  try {
    await sdk.errors.statusPostRetries(500, createSimpleObject());
  } catch (err) {
    expect(err).toBeInstanceOf(Error);
    caught = true;
  }

  expect(caught).toBe(true);
});

test("Test Errors 204 Retries", async () => {
  recordTest("errors-204-retries");

  const sdk = new SDK({});

  let caught = false;

  try {
    await sdk.errors.statusPostRetries(204, createSimpleObject());
  } catch (err) {
    expect(err).toBeInstanceOf(Error);
    caught = true;
  }

  expect(caught).toBe(true);
});
